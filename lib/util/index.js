// Generated by CoffeeScript 1.12.7
(function() {
  var Promise;

  Promise = require('bluebird');

  exports.getLeafOfPath = function(obj, path, create_object) {
    var i, j, last, len, len1, part, parts;
    parts = Array.isArray(path) ? path.slice(0) : path.split('.');
    last = parts.pop();
    if (parts.length > 0) {
      if (create_object !== false) {
        for (i = 0, len = parts.length; i < len; i++) {
          part = parts[i];
          obj = obj[part] || (obj[part] = {});
        }
      } else {
        for (j = 0, len1 = parts.length; j < len1; j++) {
          part = parts[j];
          obj = obj[part];
          if (!obj) {
            return [];
          }
        }
      }
    }
    return [obj, last];
  };

  exports.getPropertyOfPath = function(obj, path) {
    var last, ref;
    ref = exports.getLeafOfPath(obj, path, false), obj = ref[0], last = ref[1];
    return obj != null ? obj[last] : void 0;
  };

  exports.setPropertyOfPath = function(obj, path, value) {
    var last, ref;
    ref = exports.getLeafOfPath(obj, path), obj = ref[0], last = ref[1];
    obj[last] = value;
  };

  exports.bindDomain = function(fn) {
    var d;
    if (fn && (d = process.domain)) {
      return d.bind(fn);
    } else {
      return fn;
    }
  };

}).call(this);
